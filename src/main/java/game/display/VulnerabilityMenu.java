package game.display;

import java.util.ArrayList;
import java.util.List;

import org.hexworks.zircon.api.builder.component.HeaderBuilder;
import org.hexworks.zircon.api.component.Container;
import org.hexworks.zircon.api.component.Header;

import game.gamelogic.HasName;
import game.gamelogic.HasVulnerabilities;

public class VulnerabilityMenu extends Menu{

    public VulnerabilityMenu(HasVulnerabilities hasVulnerabilities){
        List<Header> headers = new ArrayList<Header>();
        List<HasName> names = new ArrayList<>();
        List<String> vulnerabilityStrings = HasVulnerabilities.getStrings(hasVulnerabilities);
        int longestOffset = 0;
        for (String string : vulnerabilityStrings) {
            int offset = string.indexOf(":");
            if (offset > longestOffset) {
                longestOffset = offset;
            }
        }
        for (String string : vulnerabilityStrings) {
            String finalString = string;
            for (int i = 0; i < (longestOffset - string.indexOf(":")); i++) {
                finalString = " " + finalString;
            }
            headers.add(
                HeaderBuilder.newBuilder()
                    .withText(finalString)
                    .build()
            );
            final String fs = finalString;
            names.add(new HasName(){

                @Override
                public String getName() {
                    return fs;
                }

            });
        }
        
        Container container = Display.createFittedContainer(screen, "Vulnerabilitys", names);
        for (Header header : headers) {
            container.addComponent(header);
        }
        screen.addComponent(container);
    }
}
